---
import Layout from "@/layouts/Layout.astro";
import PostCard from "@/components/PostCard.astro";
import type { PostItem } from "@/types/nav";
import { getCollection } from "astro:content";

export const title = "Blog";

const publishedBlogEntries = (await getCollection("blog"))
  .map(
    (post) =>
      ({
        title: post.data.title,
        description: post.data.description,
        created: post.data.created,
      }) as PostItem,
  )
  .sort((postA, postB) => postA.created.getDate() - postB.created.getDate());
---

<Layout title={title}>
  <h1>Blog</h1>
  <div>
    {publishedBlogEntries.map((post) => <PostCard item={post} />)}
  </div>
</Layout>
